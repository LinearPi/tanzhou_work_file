<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/305825 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="677"/>

<div>
<span><div><ul><li>检查你的mysql并创建一个库</li><ul><li>你的mysql是否正常运行，一般使用工具或命令行连接一次</li><li>shell连接</li></ul></ul><div>  </div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">pyvip@Vip:~$ mysql -u root -p</span></div></div><div>输入命令后，输入你的mysql密码，看到以下画面则表示mysql正常</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Welcome to the MySQL monitor.  Commands end with ; or \g.</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Your MySQL connection id is 6</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Server version: 5.7.20-0ubuntu0.16.04.1 (Ubuntu)</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Oracle is a registered trademark of Oracle Corporation and/or its</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">affiliates. Other names may be trademarks of their respective</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">owners.</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">mysql&gt;</span></div></div><div><br/></div><div>ps: localhost 代表连接本地，它的效果跟127.0.0.1类似</div><div><br/></div><div><ul><li>创建一个库</li><ul><li>使用shell创建</li></ul></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">mysql&gt; create database study;</span></div></div><div><br/></div><div><ul><li>数据工具创建的话，默认编码需要填写utf8</li></ul><img src="django模型（一）_files/Image.png" type="image/png" data-filename=""/><br/></div><div><div><br/></div><ul><li>mysql默认是只允许本地访问的，如果需要其它机器访问，需要赋权:</li></ul><div>查看权限</div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">mysql&gt; use mysql</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">mysql&gt; select user,host from user;</span></div></div><div>ps: 保证对应的user有%的权限</div><div><br/></div><div>方式一：</div><div>ps: yourpassword 是你的mysql密码</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '</span><span style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(255, 0, 0); font-family: Monaco;">yourpassword</span></span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">' WITH GRANT OPTION;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">mysql&gt; FLUSH PRIVILEGES;      # 刷新权限</span></div></div><div><br/></div><div>方式二：</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">mysql&gt; use mysql</span></span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">mysql&gt;</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">update user set host = '%' where user = 'root';</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">mysql&gt; FLUSH PRIVILEGES;      # 刷新权限</span></div></div><div><br/></div><div><br/></div><div><ul><li>安装依赖（如果使用虚拟环境，需要在虚拟环境下安装）</li><ul><li>安装mysql开发依赖包</li></ul></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">sudo apt-get install libmysqlclient-dev gcc</span></div></div><div><br/></div><div><ul><li>配置mysql_config（如果使用虚拟环境，需要在虚拟环境下安装)</li></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">sudo updatedb  </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">locate mysql_config  </span></div></div><div><div>ps： 按着执行就可以，这里就是配置一个调用mysql需要的配置</div><div><br/></div><ul><li>安装mysql-python包（如果使用虚拟环境，需要在虚拟环境下安装)</li></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">pip install Mysql-python</span></div></div><div><br/></div><div><br/></div><div><ul><li>配置settings</li></ul><div><br/></div></div><div><ul><li>配置mysql的连接</li></ul></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">DATABASES = {</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    'default': {</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        'ENGINE': 'django.db.backends.mysql',                    # 你的数据库引擎</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        'HOST': &quot;localhost&quot;,                                                # 你的数据地址，localhost代表本地</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        &quot;PORT&quot;: 3306,                                                        # 端口， 数据库的默认端口一般是3306</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        &quot;USER&quot;: &quot;root&quot;,                                                      # 用户名</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        &quot;PASSWORD&quot;: &quot;qwe123&quot;,                                        # 密码</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        &quot;NAME&quot;: &quot;study&quot;                                                    # 库名</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    }</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">}</span></div></div><div><br/></div><div>ps: 如果出现连接被拒绝的错误：</div><div>1、查看你的配置是否填写错误</div><div>2、检查你的用户是否有远程权限</div><div><br/></div><div><ul><li>编写对应的model</li><ul><li>在每个app中都有对应的models.py文件，我们可以在里面定义你需要的models</li></ul></ul></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">class Article(models.Model):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    title = models.CharField(u&quot;标题&quot;, max_length=50, null=False)                  # 定义一个标题</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    content = models.TextField(u&quot;内容&quot;, null=False)                                     # 定义一个主题内容</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><ul><li>将对应的app添加至settings中</li></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">INSTALLED_APPS = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    'django.contrib.admin',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    'django.contrib.auth',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    'django.contrib.contenttypes',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    'django.contrib.sessions',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    'django.contrib.messages',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    'django.contrib.staticfiles',</span></div><div><span style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(255, 0, 0); font-family: Monaco;">    'topic'</span></span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div></div><div><div><br/></div><ul><li>生成对应的migrations文件</li></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">python manage.py </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">makemigration</span></div></div><div><br/></div><div><ul><li>迁移同步</li></ul></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">python manage.py migrate</span></div></div><div><br/></div><div><span style="color: rgb(255, 0, 0);">ps: 一套对应</span><span style="font-size: 12px; color: rgb(255, 0, 0); font-family: Monaco; line-height: 17px;">生成的</span><span style="font-size: 9pt; color: rgb(255, 0, 0); font-family: Monaco; line-height: 17px;">migrations文件与数据库需保存一致，否则系统会报错！！！</span></div><div><span style="font-size: 9pt; color: rgb(255, 0, 0); font-family: Monaco; line-height: 17px;">ps:</span><span style="color: rgb(255, 0, 0);"> 需要对数据库表的操作</span><span style="font-size: 9pt; color: rgb(255, 0, 0); font-family: Monaco; line-height: 17px;">都需要models.py,然后走对应的migrate流程，</span><span style="font-size: 9pt; color: rgb(255, 0, 0); font-family: Monaco; line-height: 17px;">不能直接在数据库中修改数据</span></div><div><br/></div><div><ul><li>增加</li><ul><li>添加对应view视图</li></ul></ul></div><div><ul><li>使用save方法保存</li></ul><div><br/></div></div><div>例：</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">article = Article()</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">article.title = &quot;标题1&quot;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">article.content = &quot;我们的第一个&quot;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">article.save()</span></div></div><div><br/></div><div><br/></div><div><ul><li>显示</li><ul><li>添加展示的view视图</li><li>使用all()方法获取所有</li></ul></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Article.objects.all()</span></div></div><div><div><br/></div><ul><li>使用get()方法获取一个</li></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Article.objects.get(id=tid</span></div></div><div>或</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Article.objects.get(pk=tid)</span></div></div><div>ps： 官方推荐使用pk</div><div><br/></div><div>ps:  在django中, pk即代表主键</div><div><br/></div><div><ul><li>删除</li><ul><li>添加删除的view视图</li><li>通过request.GET.get()获取对应的tid</li></ul></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">tid = request.GET.get(&quot;tid&quot;)</span></div></div><div><div><br/></div><ul><li>删除一个对应<span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">Article</span></li></ul><div><br/></div></div><div>方法一、批量删除</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Article.objects.filter(id=tid).delete()</span></div></div><div><div><br/></div><div>方法二、删除单个</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Topic.objects.get(pk=tid).delete()</span></div></div><div><br/></div><ul><li>修改</li><ul><li>添加一个修改的view视图</li></ul></ul></div><div><ul><li>保存数据</li><ul><li>使用udpate方法修改</li></ul></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">Article.objects.filter(pk=tid).update(title=&quot;标题&quot;)</span></div></div><div><ul><li>使用save方式</li></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">a = Article.objects.get(pk=tid)</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">a.title = &quot;标题&quot;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">a.save()</span></div></div><div><br/></div><div><br/></div><div><ul><li>修改pycharm默认模版</li></ul><img src="django模型（一）_files/Image [1].png" type="image/png" data-filename=""/><br/></div><div><br/></div><div><br/></div><div>作业：</div><div>讲上一节作业中的主题展示数据使用django 模型替代，并添加增加和删除页面（需要传递的数据可以暂时先自己造）</div><div><br/></div></span>
</div></body></html> 