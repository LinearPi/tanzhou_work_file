<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/305825 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="603"/>

<div>
<span><div><ul><li><span style="color: rgb(1, 1, 1); font-family: 宋体; font-weight: bold;">开始一个app开发</span></li></ul><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(1, 1, 1); font-family: 宋体;">python manage.py startapp usege</span></div></div><div><br/></div><ul><li><span style="color: rgb(1, 1, 1); font-family: 宋体; font-weight: bold;">配置template</span></li></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">TEMPLATES = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    {</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        'BACKEND': 'django.template.backends.django.DjangoTemplates',</span></div><div><span style="font-size: 9pt;"><span style="background-color: rgb(251, 250, 248); font-size: 9pt; color: rgb(255, 0, 0); font-family: Monaco;">        'DIRS': [os.path.join(BASE_DIR, &quot;templates&quot;)],</span></span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        'APP_DIRS': True,</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        'OPTIONS': {</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            'context_processors': [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                'django.template.context_processors.debug',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                'django.template.context_processors.request',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                'django.contrib.auth.context_processors.auth',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">                'django.contrib.messages.context_processors.messages',</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            ],</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        },</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    },</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div></div><div><div><br/></div><ul><li><span style="color: rgb(1, 1, 1); font-family: 宋体; font-weight: bold; line-height: 1.45;">Django 如何处理一个请求</span></li></ul><div><br/></div></div><div><ul><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">Django 决定要使用的根URLconf 模块。通常，这个值就是ROOT_URLCONF 的设置，但是如果进来的HttpRequest 对象具有一个urlconf 属性（通过中间件request processing 设置），则使用这个值来替换ROOT_URLCONF 设置。</span></li><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">Django 加载该Python 模块并寻找可用的urlpatterns。它是django.conf.urls.url() 实例的一个Python 列表。</span></li><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">Django 依次匹配每个URL 模式，在与请求的URL 匹配的第一个模式停下来。</span></li><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">一旦其中的一个正则表达式匹配上，Django 将导入并调用给出的视图，它是一个简单的Python 函数（或者一个基于类的视图）。视图将获得如下参数:</span></li><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">一个HttpRequest 实例。</span></li><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">如果匹配的正则表达式返回了没有命名的组，那么正则表达式匹配的内容将作为位置参数提供给视图。</span></li><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">关键字参数由正则表达式匹配的命名组组成，但是可以被django.conf.urls.url()的可选参数kwargs覆盖。</span></li><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">如果没有匹配到正则表达式，或者如果过程中抛出一个异常，Django 将调用一个适当的错误处理视图。</span></li></ul></div><div><br/></div><div><ul><li><span style="font-size: 10pt; color: rgb(1, 1, 1); font-family: 宋体; font-weight: bold; line-height: 1.45;">URL解释：</span></li><ul><li><span style="font-size: 10pt; color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">schema://host[:port#]/path/.../[?query-string][#anchor]</span></li><li><span style="font-size: 10pt; color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">schema：指定使用的协议(例如：http, https, ftp)</span></li><li><span style="font-size: 10pt; color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">host：Http服务器的IP地址或者域名</span></li><li><span style="font-size: 10pt; color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">port：端口号，默认是80端口</span></li><li><span style="font-size: 10pt; color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">path：访问资源的路径</span></li><li><span style="font-size: 10pt; color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">query-string：发送给http服务器的数据</span></li><li><span style="font-size: 10pt; color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">anchor：锚点</span></li></ul></ul><div><br/></div><ul><li><span style="color: rgb(1, 1, 1); font-family: 宋体; font-weight: bold; line-height: 19px;">普通用法</span></li></ul><div><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 19px;">            </span></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.conf.urls import url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from . import views</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">urlpatterns = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^articles/2003/$', views.special_case_2003),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^articles/([0-9]{4})/$', views.year_archive),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^articles/([0-9]{4})/([0-9]{2})/$', views.month_archive),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$', views.article_detail),</span></div><div style="font-size: 9pt;"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div></div></div><div><div>注：</div><div><span style="line-height: 1.45;">若要从URL 中捕获一个值，只需要在它周围放置一对圆括号。</span></div><div><span style="line-height: 1.45;">不需要添加一个前导的反斜杠，因为每个URL 都有。例如，应该是^articles 而不是 ^/articles。</span></div><div><span style="line-height: 1.45;">每个正则表达式前面的'r' 是可选的但是建议加上。它告诉Python 这个字符串是“原始的” —— 字符串中任何字符都不应该转义。参见Dive Into Python 中的解释。</span></div><div><br/></div><div><br/></div><ul><li><span style="color: rgb(1, 1, 1); font-family: 宋体; font-weight: bold; line-height: 19px;">命名组</span></li></ul><div>上面的示例使用简单的、没有命名的正则表达式组（通过圆括号）来捕获URL 中的值并以位置 参数传递给视图。在更高级的用法中，可以使用命名的正则表达式组来捕获URL  中的值并以关键字 参数传递给视图。</div><div>在Python 正则表达式中，命名正则表达式组的语法是(?P&lt;name&gt;pattern)，其中name 是组的名称，pattern 是要匹配的模式。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.conf.urls import url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from . import views</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">urlpatterns = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^articles/2003/$', views.special_case_2003),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^articles/(?P&lt;year&gt;[0-9]{4})/$', views.year_archive),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^articles/(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[0-9]{2})/$', views.month_archive),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^articles/(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[0-9]{2})/(?P&lt;day&gt;[0-9]{2})/$', views.article_detail),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div></div><div><br/></div><ul><li><span style="color: rgb(1, 1, 1); font-family: 宋体; font-weight: bold; line-height: 1.45;">匹配/分组算法</span></li><ul><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">如果有命名参数，则使用这些命名参数，忽略非命名参数。</span></li><li><span style="color: rgb(1, 1, 1); font-family: 宋体; line-height: 1.45;">否则，它将以位置参数传递所有的非命名参数。</span></li><li><span style="font-family: 宋体; line-height: 1.45;">请求的URL被看做是一个普通的Python 字符串， URLconf在其上查找并匹配。进行匹配时将不包括GET或POST请求方式的参数以及域名。</span><span style="font-family: 宋体; line-height: 1.45;">换句话讲，所有的请求方法 —— 即，对同一个URL的无论是POST请求、GET请求、或HEAD请求方法等等 —— 都将路由到相同的函数。</span></li><li><span style="font-family: Palatino; line-height: 1.45;">每个捕获的参数都作为一个普通的Python 字符串传递给视图，无论正则表达式使用的是什么匹配方式。</span></li></ul></ul><div><br/></div><ul><li><span style="font-family: Palatino; font-weight: bold; line-height: 1.45;">指定视图参数的默认值</span></li></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"># URLconf</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.conf.urls import url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from . import views</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">urlpatterns = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^blog/$', views.page),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^blog/page(?P&lt;num&gt;[0-9]+)/$', views.page),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"># View (in blog/views.py)</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">def page(request, num=&quot;1&quot;):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    # Output the appropriate page of blog entries, according to num.</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    ...</span></div></div><div><br/></div><div><br/></div><div><ul><li><span style="font-weight: bold;">错误处理</span></li></ul><div><span style="line-height: 1.45;">            当Django 找不到一个匹配请求的URL 的正则表达式时，或者当抛出一个异常时，Django 将调用一个错误处理视图。</span></div></div><div><span style="line-height: 1.45;"><br/></span></div><div><ul><li>在URLconf中指定参数，这些参数分别是</li><ul><li>handler404</li></ul></ul><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">                                一个callable或一个字符串，表示如果没有URL模式匹配，应该调用的视图的完整Python导入路径。</span></div></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">                                默认情况下，这是</span><span style="font-size: 1em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-rendering: optimizespeed; color: rgb(12, 75, 51); font-family: 'Fira Mono', Consolas, Menlo, Monaco, 'Courier New', Courier, monospace; font-weight: bold; line-height: 14px;">'django.views.defaults.page_not_found'</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">。</span></div><div>                                </div><div><ul><li>handler500</li></ul><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">                                <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;"> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">一个callable或一个字符串，表示如果没有URL模式匹配，应该调用的视图的完整Python导入路径。</span></span></div></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">默认情况下，这是</span><span style="font-size: 1em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-rendering: optimizespeed; color: rgb(12, 75, 51); font-family: 'Fira Mono', Consolas, Menlo, Monaco, 'Courier New', Courier, monospace; font-weight: bold; line-height: 14px;">'django.views.defaults.page_not_found'</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">。</span></div><div><div style="orphans: 2; widows: 2;"><div><br/></div></div><ul><li>handler403</li></ul><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">                                一个callable或一个字符串，表示如果用户没有访问资源所需的权限，应调用的视图的完整Python导入路径。</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">    </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">默认情况下，这是</span><span style="font-size: 1em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-rendering: optimizespeed; color: rgb(12, 75, 51); font-family: 'Fira Mono', Consolas, Menlo, Monaco, 'Courier New', Courier, monospace; font-weight: bold; line-height: 14px;">'django.views.defaults.permission_denied'</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">。</span></div><div><br/></div><ul><li>handler400</li></ul><div>                                如果HTTP客户端已发送导致错误条件的请求和状态代码为400的响应，则应调用的可调用或表示完整的Python视图导入路径的字符串。</div></div><div>                                默认情况下，这是'django.views.defaults.bad_request'。</div><div><br/></div><div><ul><li><span style="font-weight: bold;">包含其它的URLconfs</span></li></ul><div><span style="font-size: 14px; orphans: 2; widows: 2; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;"><span style="font-size: 14px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif; font-weight: bold;">            </span>在任何时候，你的</span><span style="font-size: 1em; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); text-rendering: optimizespeed; color: rgb(12, 75, 51); font-family: 'Fira Mono', Consolas, Menlo, Monaco, 'Courier New', Courier, monospace; line-height: 14px;">urlpatterns</span><span style="font-size: 14px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;"> </span><span style="font-size: 14px; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">都可以包含其它URLconf 模块。</span><span style="font-size: 14px; orphans: 2; widows: 2; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">这实际上将一部分URL 放置于其它URL 下面。</span></div></div><div><br/></div><div>例：</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.conf.urls import include, url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">urlpatterns = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    # ... snip ...</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^community/', include('django_website.aggregator.urls')),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^contact/', include('django_website.contact.urls')),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    # ... snip ...</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div></div><div><div><br/></div><ul><li><span style="font-weight: bold;">传递额外的选项给视图函数</span></li></ul><div>URLconfs 具有一个钩子，让你传递一个Python 字典作为额外的参数传递给视图函数。</div></div><div>django.conf.urls.url() 函数可以接收一个可选的第三个参数，它是一个字典，表示想要传递给视图函数的额外关键字参数。</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"># main.py</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.conf.urls import include, url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">urlpatterns = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^blog/', include('inner'), {'blogid': 3}),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"># inner.py</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.conf.urls import url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from mysite import views</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">urlpatterns = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^archive/$', views.archive),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^about/$', views.about),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div></div><div><br/></div><div><br/></div><div><ul><li><span style="font-weight: bold;">URL 的反向解析</span></li></ul><div>在使用Django 项目时，一个常见的需求是获得URL 的最终形式，以用于嵌入到生成的内容中（视图中和显示给用户的URL等）或者用于处理服务器端的导航（重定向等）。</div></div><div>人们强烈希望不要硬编码这些URL（费力、不可扩展且容易产生错误）或者设计一种与URLconf 毫不相关的专门的URL 生成机制，因为这样容易导致一定程度上产生过期的URL。</div><div>换句话讲，需要的是一个DRY 机制。除了其它优点，它还允许设计的URL 可以自动更新而不用遍历项目的源代码来搜索并替换过期的URL。</div><div>要获取一个URL，最初拥有的信息是负责处理它的视图的标识（例如名字），与查找正确的URL 的其它必要的信息如视图参数的类型（位置参数、关键字参数）和值。</div><div>Django 提供了一个解决方案使得URL 映射是URL 设计唯一的储存库。你用你的URLconf填充它，然后可以双向使用它：</div><div><ul><li><span style="line-height: 1.45;">根据用户/浏览器发起的URL 请求，它调用正确的Django 视图，并从URL 中提取它的参数需要的值。</span></li><li><span style="line-height: 1.45;">根据Django 视图的标识和将要传递给它的参数的值，获取与之关联的URL。</span></li></ul></div><div>第一种方式是我们在前面的章节中一直讨论的用法。第二种方式叫做反向解析URL、反向URL匹配、反向URL查询或者简单的URL反查。</div><div><div><span style="line-height: 1.45;">在需要URL 的地方，对于不同层级，Django 提供不同的工具用于URL 反查：</span></div><ul><li><span style="line-height: 1.45;">在模板中：使用url 模板标签。</span></li><li><span style="line-height: 1.45;">在Python 代码中：使用django.core.urlresolvers.reverse() 函数。</span></li></ul></div><div><ul><li><span style="line-height: 1.45;">在更高层的与处理Django 模型实例相关的代码中：使用get_absolute_url() 方法。</span></li></ul><div><br/></div></div><div>例：</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.conf.urls import url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from . import views</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">urlpatterns = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    #...</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^articles/([0-9]{4})/$', views.year_archive, name='news-year-archive'),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    #...</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div></div><div><br/></div><div>在模版中使用</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">&lt;a href=&quot;{% url 'news-year-archive' 2012 %}&quot;&gt;2012 Archive&lt;/a&gt;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">&lt;ul&gt;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">{% for yearvar in year_list %}</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">&lt;li&gt;&lt;a href=&quot;{% url 'news-year-archive' yearvar %}&quot;&gt;{{ yearvar }} Archive&lt;/a&gt;&lt;/li&gt;</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">{% endfor %}</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">&lt;/ul&gt;</span></div></div><div><br/></div><div><br/></div><div>在python代码中使用</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.core.urlresolvers import reverse</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.http import HttpResponseRedirect</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">def redirect_to_year(request):</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    # ...</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    year = 2006</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    # ...</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    return HttpResponseRedirect(reverse('news-year-archive', args=(year,)))</span></div></div><div><br/></div><div><br/></div><div><ul><li><span style="font-weight: bold; line-height: 1.45;">URL 模式的命名</span></li></ul><div>为了完成上面例子中的URL 反查，你将需要使用命名的URL 模式。URL 的名称使用的字符串可以包含任何你喜欢的字符。并不仅限于合法的Python 名称。</div></div><div>当命名你的URL 模式时，请确保使用的名称不会与其它应用中名称冲突。如果你的URL 模式叫做comment，而另外一个应用中也有一个同样的名称，当你在模板中使用这个名称的时候不能保证将插入哪个URL。</div><div>在URL 名称中加上一个前缀，比如应用的名称，将减少冲突的可能。我们建议使用myapp-comment 而不是comment。</div><div><br/></div><div><ul><li><span style="font-weight: bold; line-height: 1.45;">URL 命名空间</span></li></ul><div>URL 命名空间允许你反查到唯一的命名URL 模式，即使不同的应用使用相同的URL 名称。第三方应用始终使用带命名空间的URL 是一个很好的实践（我们在教程中也是这么做的）。类似地，它还允许你在一个应用有多个实例部署的情况下反查URL。换句话讲，因为一个应用的多个实例共享相同的命名URL，命名空间提供了一种区分这些命名URL 的方法。</div></div><div><br/></div><div>一个URL命名空间有两个部分，它们都是字符串：</div><div><ul><li>应用命名空间</li><ul><li>它表示正在部署的应用的名称。一个应用的每个实例具有相同的应用命名空间。例如，可以预见Django 的管理站点的应用命名空间是'admin'。</li></ul><li>实例命名空间</li><ul><li><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">它表示应用的一个特定的实例。</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">实例的命名空间在你的全部项目中应该是唯一的。</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">但是，一个实例的命名空间可以和应用的命名空间相同。</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">它用于表示一个应用的默认实例。</span></li><li><span style="font-size: 11pt; color: rgb(12, 60, 38); font-family: Palatino;">URL 的命名空间使用':' 操作符指定。例如，管理站点应用的主页使用'admin:index'。它表示'admin' 的一个命名空间和'index' 的一个命名URL。</span></li><li><span style="font-size: 11pt; color: rgb(12, 60, 38); font-family: Palatino;">命名空间也可以嵌套。命名URL'sports:polls:index' 将在命名空间'polls'中查找'index'，而poll 定义在顶层的命名空间'sports' 中。</span></li></ul></ul></div><div><br/></div><div><br/></div><div><ul><li><span style="font-weight: bold;">反查带命名空间的URL</span></li></ul></div><div><span style="font-family: Palatino;">                当解析一个带命名空间的URL（例如'polls:index'）时，Django 将切分名称为多个部分，然后按下面的步骤查找：</span></div><div><ul><li><span style="font-family: Palatino; line-height: 1.45;">首先，Django 查找匹配的应用命名空间(在这个例子中为'polls'）。这将得到该应用实例的一个列表。</span></li><li><span style="font-family: Palatino; line-height: 1.45;">如果有一个当前应用被定义，Django 将查找并返回那个实例的URL 解析器。当前应用可以通过请求上的一个属性指定。</span></li><li><span style="font-family: Palatino; line-height: 1.45;">当前应用还可以通过reverse() 函数的一个参数手工设定。</span></li><li><span style="font-family: Palatino; line-height: 1.45;">如果没有当前应用。Django 将查找一个默认的应用实例。默认的应用实例是实例命名空间 与应用命名空间 一致的那个实例（在这个例子中，polls 的一个叫做'polls' 的实例）。</span></li><li><span style="font-family: Palatino; line-height: 1.45;">如果没有默认的应用实例，Django 将挑选该应用最后部署的实例，不管实例的名称是什么。</span></li><li><span style="font-family: Palatino; line-height: 1.45;">如果提供的命名空间与第1步中的应用命名空间 不匹配，Django 将尝试直接将此命名空间作为一个实例命名空间查找。</span></li><li><span style="font-family: Palatino; line-height: 1.45;">如果有嵌套的命名空间，将为命名空间的每个部分重复调用这些步骤直至剩下视图的名称还未解析。然后该视图的名称将被解析到找到的这个命名空间中的一个URL。</span></li></ul></div><div><br/></div><div>例：</div><div>假设我们现在有以下两个配置</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># urls.py</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.conf.urls import include, url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">urlpatterns = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^author-polls/', include('polls.urls', namespace='author-polls', app_name='polls')),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^publisher-polls/', include('polls.urls', namespace='publisher-polls', app_name='polls')),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div><div><br/></div><div><br/></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"># polls</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from django.conf.urls import url</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">from . import views</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">urlpatterns = [</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^$', views.IndexView.as_view(), name='index'),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    url(r'^(?P&lt;pk&gt;\d+)/$', views.DetailView.as_view(), name='detail'),</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    ...</span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">]</span></div></div><div><br/></div><div>根据以上设置，可以使用下面的查询：</div><div><ul><li>如果其中一个实例是当前实例 —— 如果我们正在渲染'author-polls' 实例的detail 页面 —— 'polls:index' 将解析成'author-polls' 实例的主页面；例如下面两个都将解析成&quot;/author-polls/&quot;。</li><ul><li><span style="line-height: 1.45;">在基于类的视图的方法中：</span></li></ul></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">reverse('polls:index', current_app=self.request.resolver_match.namespace)</span></div></div><div><div><br/></div><ul><li><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(12, 60, 38); font-family: Palatino, 'Palatino Linotype', 'Book Antiqua', 'Hoefler Text', Georgia, 'Lucida Bright', Cambria, Times, 'Times New Roman', serif;">和在模板中：</span></li></ul><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">{% url 'polls:index' %}</span></div></div><div>   </div><div><br/></div><div>作业：</div><div>       上课讲的每一种urls使用方式都自己写一次</div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 